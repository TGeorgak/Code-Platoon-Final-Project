(this["webpackJsonpcovid-app"]=this["webpackJsonpcovid-app"]||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(14),s=a(7),i=a.n(s),r=a(98),c=a.n(r),o=(a(142),a(34)),l=a.n(o),u=a(62),d=a(126),h=a(38),j=(a(143),a(144),a(57)),b=a(58),v=a(79),m=a(78),g=a(161),p=a(162),f=function(e){return Object(n.jsxs)(g.a,{onSubmit:function(t){t.preventDefault(),console.log("Author: ".concat(t.target.author.value,", Comments: ").concat(t.target.textarea1.value)),e.close()},children:[Object(n.jsxs)(g.a.Group,{controlId:"author",children:[Object(n.jsx)(g.a.Label,{children:"Author:"}),Object(n.jsx)(g.a.Control,{defaultValue:"John Smith",readOnly:!0})]}),Object(n.jsxs)(g.a.Group,{controlId:"textarea1",children:[Object(n.jsx)(g.a.Label,{children:"Comment:"}),Object(n.jsx)("br",{}),Object(n.jsx)(g.a.Control,{as:"textarea",rows:10,cols:50})]}),Object(n.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})},O=f,x=a(129),S=a.n(x),U=function(e){var t=e.onClickOutside,a=e.onKeyDown,s=e.modalRef,i=e.buttonRef,r=e.closeModal;e.onSubmit;return c.a.createPortal(Object(n.jsx)(S.a,{children:Object(n.jsx)("aside",{tag:"aside",role:"dialog",tabIndex:"-1","aria-modal":"true",className:"modal-cover",onClick:t,onKeyDown:a,children:Object(n.jsxs)("div",{className:"modal-area",ref:s,children:[Object(n.jsxs)("button",{ref:i,"aria-label":"Close Modal","aria-labelledby":"close-modal",className:"_modal-close",onClick:r,children:[Object(n.jsx)("span",{id:"close-modal",className:"_hide-visual",children:"Close"}),Object(n.jsx)("svg",{className:"_modal-close-icon",viewBox:"0 0 40 40",children:Object(n.jsx)("path",{d:"M 10,10 L 30,30 M 30,10 L 10,30"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)(f,{close:r})})]})})}),document.body)},y=function(e){var t=e.triggerText,a=e.buttonRef,s=e.showModal;return Object(n.jsx)("button",{className:"btn btn-lg btn-danger center modal-button",ref:a,onClick:s,children:t})},_=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isShown:!1},e.showModal=function(){e.setState({isShown:!0},(function(){e.closeButton.focus()})),e.toggleScrollLock()},e.closeModal=function(){e.setState({isShown:!1}),e.TriggerButton.focus(),e.toggleScrollLock()},e.onKeyDown=function(t){27===t.keyCode&&e.closeModal()},e.onClickOutside=function(t){e.modal&&e.modal.contains(t.target)||e.closeModal()},e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(y,{showModal:this.showModal,buttonRef:function(t){return e.TriggerButton=t},triggerText:this.props.triggerText}),this.state.isShown?Object(n.jsx)(U,{onSubmit:this.props.onSubmit,modalRef:function(t){return e.modal=t},buttonRef:function(t){return e.closeButton=t},closeModal:this.closeModal,onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside}):null]})}}]),a}(s.Component);var w=function(e){var t=e.sName;return Object(n.jsxs)("div",{id:"StatePage-container",children:[Object(n.jsx)("div",{className:"a-api_feed_title",children:"PUBLIC COMMENT"}),Object(n.jsx)("div",{className:"a-api_feed_container"}),Object(n.jsx)("div",{className:"a-api_add_feed_button",children:Object(n.jsx)(_,{triggerText:"Open form"})}),Object(n.jsx)("div",{className:"a-state_name_container",children:t}),Object(n.jsx)("div",{className:"a-state_info_container"})]})},N=(a(148),a(84)),C=a(100),k=a(131),I=a(133);a(150);var M=function(e){var t=Object(h.f)();return Object(s.useEffect)((function(){N.d(I.a);var a=N.b("chartdiv",C.b);a.geodata=k.a,a.projection=new C.d.AlbersUsa;var n=a.series.push(new C.c);n.heatRules.push({property:"fill",target:n.mapPolygons.template,min:a.colors.getIndex(8).brighten(3),max:a.colors.getIndex(8).brighten(-.3)}),n.useGeodata=!0,n.data=[{id:"US-AL",value:4447100},{id:"US-AK",value:626932},{id:"US-AZ",value:5130632},{id:"US-AR",value:2673400},{id:"US-CA",value:33871648},{id:"US-CO",value:4301261},{id:"US-CT",value:3405565},{id:"US-DE",value:783600},{id:"US-FL",value:15982378},{id:"US-GA",value:8186453},{id:"US-HI",value:1211537},{id:"US-ID",value:1293953},{id:"US-IL",value:12419293},{id:"US-IN",value:6080485},{id:"US-IA",value:2926324},{id:"US-KS",value:2688418},{id:"US-KY",value:4041769},{id:"US-LA",value:4468976},{id:"US-ME",value:1274923},{id:"US-MD",value:5296486},{id:"US-MA",value:6349097},{id:"US-MI",value:9938444},{id:"US-MN",value:4919479},{id:"US-MS",value:2844658},{id:"US-MO",value:5595211},{id:"US-MT",value:902195},{id:"US-NE",value:1711263},{id:"US-NV",value:1998257},{id:"US-NH",value:1235786},{id:"US-NJ",value:8414350},{id:"US-NM",value:1819046},{id:"US-NY",value:18976457},{id:"US-NC",value:8049313},{id:"US-ND",value:642200},{id:"US-OH",value:11353140},{id:"US-OK",value:3450654},{id:"US-OR",value:3421399},{id:"US-PA",value:12281054},{id:"US-RI",value:1048319},{id:"US-SC",value:4012012},{id:"US-SD",value:754844},{id:"US-TN",value:5689283},{id:"US-TX",value:20851820},{id:"US-UT",value:2233169},{id:"US-VT",value:608827},{id:"US-VA",value:7078515},{id:"US-WA",value:5894121},{id:"US-WV",value:1808344},{id:"US-WI",value:5363675},{id:"US-WY",value:493782}];var s=a.createChild(C.a);s.id="heatLegend",s.series=n,s.align="right",s.valign="bottom",s.width=N.c(35),s.marginRight=N.c(4),s.background.fill=N.a("#000"),s.background.fillOpacity=.05,s.padding(5,5,5,5),s.valueAxis.axisRanges.create().label.horizontalCenter="left",s.valueAxis.axisRanges.create().label.horizontalCenter="right",s.valueAxis.renderer.labels.template.adapter.add("text",(function(e){return""})),n.events.on("datavalidated",(function(e){var t=e.target.map.getKey("heatLegend"),a=t.series.dataItem.values.value.low,n=t.valueAxis.axisRanges.getIndex(0);n.value=a,n.label.text=""+t.numberFormatter.format(a);var s=t.series.dataItem.values.value.high,i=t.valueAxis.axisRanges.getIndex(1);i.value=s,i.label.text=""+t.numberFormatter.format(s)}));var i=n.mapPolygons.template;i.tooltipText="{name}: {value}",i.nonScalingStroke=!0,i.strokeWidth=.5,i.states.create("hover").properties.fill=N.a("#3c5bdc");i.events.on("hit",(function(a){var n;n=a.target.dataItem.dataContext.name,e.setSName(n),t.push("/state-page")}))}),[e,t]),Object(n.jsx)("div",{id:"chartdiv"})};var A=function(e){var t=e.setSName,a=e.chart,s=e.currentUSValues.map((function(e,t){return Object(n.jsxs)("div",{children:["Positive Cases: ",e.positive," Deaths: ",e.death]},t)})),i=e.currentUSValues.map((function(e,t){return Object(n.jsxs)("div",{children:["Last Updated: ",e.lastModified]},t)}));return Object(n.jsxs)("div",{id:"home-container",children:[Object(n.jsx)("div",{className:"b-label-title",children:"title"}),Object(n.jsx)("div",{className:"b-updated-lable",children:i}),Object(n.jsx)("div",{className:"b-tweet-label",children:"tweet"}),Object(n.jsx)("div",{className:"b-info-updater",children:s}),Object(n.jsx)("div",{className:"b-tweet-container",children:"tweet container"}),Object(n.jsx)("div",{className:"b-us-map",children:Object(n.jsx)(M,{map:a,setSName:t})})]})},T=(a(153),a(94));var L=function(e){return Object(n.jsxs)("div",{id:"nav-container",children:[Object(n.jsx)("div",{className:"sub-nav-title",children:"COVID APP"}),Object(n.jsx)("div",{className:"sub-nav-home-button",children:Object(n.jsx)(T.b,{to:"/",children:"HOME"})})]})};var D=function(e){var t=Object(n.jsxs)("div",{className:"nav-login-signup",children:[Object(n.jsx)("div",{className:"sub-nav-login-button",onClick:function(){return e.display_form("login")},children:"Login"}),Object(n.jsx)("div",{className:"sub-nav-signup-button",onClick:function(){return e.display_form("signup")},children:"Signup"})]}),a=Object(n.jsx)("ul",{children:Object(n.jsx)("li",{onClick:e.handle_logout,children:"logout"})});return Object(n.jsx)("div",{children:e.logged_in?a:t})},P=a(119),R=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handle_change=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){var t=Object(P.a)({},e);return t[a]=n,t}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)},children:[Object(n.jsx)("h4",{children:"Log In"}),Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(n.jsx)("input",{type:"submit"})]})}}]),a}(i.a.Component),F=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handle_change=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){var t=Object(P.a)({},e);return t[a]=n,t}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return console.log("sign up form is called"),Object(n.jsxs)("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)},children:[Object(n.jsx)("h4",{children:"Sign Up"}),Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(n.jsx)("input",{type:"submit"})]})}}]),a}(i.a.Component),K="http://localhost:8000/",V=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handle_login=function(e,t){e.preventDefault(),fetch("".concat(K,"token-auth/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),n.setState({logged_in:!0,displayed_form:"",username:e.user.username})}))},n.handle_signup=function(e,t){e.preventDefault(),fetch("".concat(K,"covid/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),n.setState({logged_in:!0,displayed_form:"",username:e.username})}))},n.handle_logout=function(){localStorage.removeItem("token"),n.setState({logged_in:!1,username:""})},n.display_form=function(e){n.setState({displayed_form:e})},n.state={displayed_form:"",logged_in:!!localStorage.getItem("token"),username:""},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in&&fetch("".concat(K,"/covid/current_user/"),{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username})}))}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=Object(n.jsx)(R,{handle_login:this.handle_login});break;case"signup":e=Object(n.jsx)(F,{handle_signup:this.handle_signup});break;default:e=null}return Object(n.jsxs)("div",{children:[Object(n.jsx)(D,{logged_in:this.state.logged_in,display_form:this.display_form,handle_logout:this.handle_logout}),e,Object(n.jsx)("h3",{children:this.state.logged_in?"Hello, ".concat(this.state.username):""})]})}}]),a}(i.a.Component),B="https://api.covidtracking.com",E=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(B).concat("/v1/us/current.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();var J=function(e){var t=Object(s.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(s.useState)([]),j=Object(d.a)(o,2),b=j[0],v=j[1];return i.a.useEffect((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)("div",{id:"app-container",children:[Object(n.jsxs)("div",{className:"nav-bar",children:[Object(n.jsx)(V,{}),Object(n.jsx)(L,{})]}),Object(n.jsx)("div",{className:"body-container",children:Object(n.jsxs)(h.c,{children:[Object(n.jsx)(h.a,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(A,{setSName:c,currentUSValues:b})}}),Object(n.jsx)(h.a,{exact:!0,path:"/state-page",render:function(e){return Object(n.jsx)(w,{sName:r})}}),Object(n.jsx)(h.a,{exact:!0,path:"/add-comments",component:O})]})})]})},W=function(e){e&&e instanceof Function&&a.e(7).then(a.bind(null,364)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(T.a,{basename:"/",children:Object(n.jsx)(J,{})})}),document.getElementById("root")),W()}},[[154,1,4]]]);
//# sourceMappingURL=main.52c2c692.chunk.js.map